# Troubleshooting Guide

_Comprehensive troubleshooting guide for Image Studio_

---

**Author:** Hazem Ali, Microsoft AI MVP  
**Repository:** [Image Studio](https://github.com/DrHazemAli/image-studio)  
**Documentation:** [Wiki](https://github.com/DrHazemAli/image-studio/wiki)

[![GitHub](https://img.shields.io/badge/GitHub-DrHazemAli-blue)](https://github.com/DrHazemAli)
[![LinkedIn](https://img.shields.io/badge/LinkedIn-drhazemali-blue)](https://linkedin.com/in/drhazemali)
[![MVP](https://img.shields.io/badge/Microsoft-AI%20MVP-blue)](https://mvp.microsoft.com/)

---

## 🎯 Overview

This guide helps you diagnose and resolve common issues with Image Studio. Whether you're experiencing problems with image generation, configuration, or performance, this guide provides step-by-step solutions.

**Note**: This is not an official Microsoft or Azure product, but rather a community project maintained by Microsoft MVPs that utilizes Azure's AI services.

## 🔍 Quick Diagnostics

### System Check

Run this command to check your system status:

```bash
# Check application status
image-studio config validate

# Check system requirements
image-studio dev check-system

# View current configuration
image-studio config show
```

### Health Check

```bash
# Comprehensive health check
image-studio dev health-check

# Check specific components
image-studio dev health-check --component azure
image-studio dev health-check --component assets
image-studio dev health-check --component projects
```

## 🚨 Common Issues

### Image Generation Issues

#### Problem: "Azure is not configured" Error

**Symptoms:**

- Error message: "Azure is not configured, Please configure Azure first from settings"
- Generation requests fail immediately
- Settings show no Azure configuration

**Solutions:**

1. **Check Configuration:**

   ```bash
   image-studio config show
   ```

2. **Reconfigure Azure:**
   - Open Settings → Azure
   - Enter your Azure API key
   - Add your Azure endpoint
   - Save configuration

3. **Verify API Key:**

   ```bash
   image-studio config validate --test-connection
   ```

4. **Reset Configuration:**
   ```bash
   image-studio config reset
   image-studio config init
   ```

#### Problem: Generation Timeout

**Symptoms:**

- Generation starts but never completes
- Loading indicator runs indefinitely
- No error message displayed

**Solutions:**

1. **Check Network Connection:**
   - Verify internet connectivity
   - Test Azure endpoint accessibility
   - Check firewall settings

2. **Increase Timeout:**
   - Go to Settings → Advanced → Network
   - Increase timeout value to 60 seconds
   - Save settings

3. **Check Azure Service Status:**
   - Visit Azure Service Health dashboard
   - Verify your Azure subscription status
   - Check for regional outages

4. **Try Different Model:**
   - Switch to a different AI model
   - Use smaller image sizes
   - Reduce generation count

#### Problem: Poor Image Quality

**Symptoms:**

- Generated images are blurry or low quality
- Images don't match the prompt
- Inconsistent results

**Solutions:**

1. **Improve Prompt Quality:**
   - Use more descriptive prompts
   - Add style keywords (e.g., "high quality", "detailed")
   - Specify artistic style (e.g., "photorealistic", "digital art")

2. **Adjust Settings:**
   - Set quality to "HD" in generation settings
   - Use appropriate image sizes
   - Try different models

3. **Prompt Engineering:**
   ```
   Good: "a beautiful sunset over mountains, high quality, detailed, photorealistic"
   Bad: "sunset mountains"
   ```

#### Problem: "Model not available" Error

**Symptoms:**

- Error: "Model not available"
- Model selection shows no options
- Generation fails with model error

**Solutions:**

1. **Check Model Configuration:**

   ```bash
   image-studio models list
   ```

2. **Update Model Configuration:**
   - Go to Settings → Models
   - Refresh model list
   - Verify model endpoints

3. **Check Azure Deployment:**
   - Verify model deployment in Azure portal
   - Check deployment status
   - Ensure proper permissions

### Configuration Issues

#### Problem: Settings Not Saving

**Symptoms:**

- Settings changes don't persist
- Configuration resets on restart
- Error messages when saving

**Solutions:**

1. **Check File Permissions:**

   ```bash
   # Check write permissions
   ls -la ~/.image-studio/

   # Fix permissions if needed
   chmod 755 ~/.image-studio/
   ```

2. **Clear Configuration Cache:**

   ```bash
   image-studio config clear-cache
   ```

3. **Reset Settings:**

   ```bash
   image-studio config reset --backup
   ```

4. **Check Storage Space:**
   - Ensure sufficient disk space
   - Clear temporary files
   - Check for disk errors

#### Problem: API Key Not Working

**Symptoms:**

- "Invalid API key" error
- Authentication failures
- 401 Unauthorized responses

**Solutions:**

1. **Verify API Key:**
   - Check key in Azure portal
   - Ensure key is active and not expired
   - Copy key again from Azure

2. **Check Key Format:**
   - Ensure no extra spaces or characters
   - Verify key length and format
   - Try regenerating the key

3. **Test Connection:**

   ```bash
   image-studio config validate --test-connection
   ```

4. **Check Permissions:**
   - Verify key has required permissions
   - Check Azure resource access
   - Ensure proper role assignments

### Performance Issues

#### Problem: Slow Generation

**Symptoms:**

- Long generation times (>30 seconds)
- Application becomes unresponsive
- High CPU/memory usage

**Solutions:**

1. **Optimize Settings:**
   - Use smaller image sizes
   - Reduce generation count
   - Disable unnecessary features

2. **Check System Resources:**
   - Close other applications
   - Increase available RAM
   - Check CPU usage

3. **Network Optimization:**
   - Use wired connection instead of WiFi
   - Check network speed
   - Try different Azure region

4. **Hardware Acceleration:**
   - Enable GPU acceleration in settings
   - Update graphics drivers
   - Check hardware compatibility

#### Problem: High Memory Usage

**Symptoms:**

- Application uses excessive RAM
- System becomes slow
- Out of memory errors

**Solutions:**

1. **Reduce Cache Size:**
   - Go to Settings → Performance
   - Reduce cache size
   - Clear existing cache

2. **Close Unused Projects:**
   - Close unnecessary project tabs
   - Clear project history
   - Restart application

3. **Optimize Images:**
   - Use smaller image sizes
   - Compress images before processing
   - Remove unused assets

4. **System Optimization:**
   - Close other applications
   - Increase virtual memory
   - Restart system

### Asset Store Issues

#### Problem: Asset Search Not Working

**Symptoms:**

- Search returns no results
- "API key not configured" error
- Network timeout errors

**Solutions:**

1. **Check API Keys:**
   - Verify Pexels/Unsplash API keys
   - Check key validity and limits
   - Regenerate keys if needed

2. **Test API Connection:**

   ```bash
   image-studio assets test-connection
   ```

3. **Check Network:**
   - Verify internet connectivity
   - Check firewall settings
   - Try different network

4. **Update Configuration:**
   - Refresh asset store settings
   - Clear API cache
   - Restart application

#### Problem: Asset Download Fails

**Symptoms:**

- Assets don't download
- "Download failed" error
- Incomplete downloads

**Solutions:**

1. **Check Storage Space:**
   - Ensure sufficient disk space
   - Clear temporary files
   - Check download location permissions

2. **Verify Asset URLs:**
   - Check asset URL validity
   - Test direct download
   - Clear asset cache

3. **Network Issues:**
   - Check internet connection
   - Try different network
   - Use VPN if needed

### Project Management Issues

#### Problem: Project Won't Save

**Symptoms:**

- "Save failed" error
- Project changes not persisted
- File permission errors

**Solutions:**

1. **Check File Permissions:**

   ```bash
   # Check project directory permissions
   ls -la ./projects/

   # Fix permissions
   chmod 755 ./projects/
   ```

2. **Verify Storage Space:**
   - Check available disk space
   - Clear temporary files
   - Move projects to different location

3. **Project Validation:**

   ```bash
   image-studio project validate --name "Project Name"
   ```

4. **Backup and Restore:**

   ```bash
   # Export project
   image-studio project export --name "Project Name" --backup

   # Clear project cache
   image-studio project clear-cache
   ```

#### Problem: Project Won't Load

**Symptoms:**

- Project fails to open
- "Corrupted project" error
- Loading hangs indefinitely

**Solutions:**

1. **Check Project File:**
   - Verify project file exists
   - Check file integrity
   - Try opening in text editor

2. **Project Repair:**

   ```bash
   image-studio project repair --name "Project Name"
   ```

3. **Restore from Backup:**

   ```bash
   image-studio project restore --backup ./backup/project.zip
   ```

4. **Create New Project:**
   - Create new project
   - Import assets manually
   - Recreate project structure

## 🔧 Advanced Troubleshooting

### Debug Mode

#### Enable Debug Logging

```bash
# Set debug environment variable
export DEBUG=image-studio:*

# Run with debug output
image-studio generate single --prompt "test" --debug
```

#### Debug Configuration

```bash
# Check configuration details
image-studio config show --debug

# Validate with verbose output
image-studio config validate --verbose
```

#### Debug Generation

```bash
# Generate with debug info
image-studio generate single --prompt "test" --verbose --debug

# Check generation logs
image-studio dev logs --tail 100
```

### System Diagnostics

#### Check System Requirements

```bash
# Check Node.js version
node --version

# Check npm version
npm --version

# Check system resources
image-studio dev check-system
```

#### Network Diagnostics

```bash
# Test Azure connectivity
curl -I https://your-azure-endpoint.openai.azure.com/

# Check DNS resolution
nslookup your-azure-endpoint.openai.azure.com

# Test API endpoint
image-studio config validate --test-connection
```

#### File System Check

```bash
# Check disk space
df -h

# Check file permissions
ls -la ~/.image-studio/

# Check for corrupted files
image-studio dev check-files
```

### Log Analysis

#### View Application Logs

```bash
# View recent logs
image-studio dev logs

# View specific log types
image-studio dev logs --type error
image-studio dev logs --type generation

# Follow logs in real-time
image-studio dev logs --follow
```

#### Log Locations

- **Application Logs**: `~/.image-studio/logs/`
- **Error Logs**: `~/.image-studio/logs/error.log`
- **Generation Logs**: `~/.image-studio/logs/generation.log`
- **System Logs**: `~/.image-studio/logs/system.log`

#### Common Log Patterns

```bash
# Search for errors
grep -i "error" ~/.image-studio/logs/*.log

# Search for generation issues
grep -i "generation" ~/.image-studio/logs/*.log

# Search for API errors
grep -i "api" ~/.image-studio/logs/*.log
```

## 🛠️ Recovery Procedures

### Complete Reset

```bash
# Backup current configuration
image-studio config export --backup

# Reset all settings
image-studio config reset --all

# Reinitialize configuration
image-studio config init

# Restore from backup if needed
image-studio config import --backup ./backup/config.json
```

### Project Recovery

```bash
# List all projects
image-studio project list

# Export all projects
image-studio project export-all --output ./backup

# Repair specific project
image-studio project repair --name "Project Name"

# Restore from backup
image-studio project import --file ./backup/project.zip
```

### Data Recovery

```bash
# Check for corrupted data
image-studio dev check-data

# Repair corrupted files
image-studio dev repair-data

# Restore from backup
image-studio dev restore-data --backup ./backup
```

## 📞 Getting Help

### Self-Service Resources

1. **Check Documentation**: Review relevant guides
2. **Search Issues**: Check GitHub issues for similar problems
3. **Community Forums**: Post in GitHub Discussions
4. **Log Analysis**: Use debug mode to gather information

### Reporting Issues

When reporting issues, include:

1. **System Information**: OS, Node.js version, application version
2. **Error Messages**: Complete error messages and stack traces
3. **Steps to Reproduce**: Detailed steps to reproduce the issue
4. **Log Files**: Relevant log files and debug output
5. **Configuration**: Current configuration (without sensitive data)

### Contact Information

- **GitHub Issues**: [Report Issues](https://github.com/DrHazemAli/image-studio/issues)
- **Discussions**: [GitHub Discussions](https://github.com/DrHazemAli/image-studio/discussions)
- **Documentation**: [Wiki](https://github.com/DrHazemAli/image-studio/wiki)

## 📚 Related Documentation

- **[Installation Guide](installation-guide.mdx)** - Setup and installation
- **[Azure Setup Guide](azure-setup-guide.mdx)** - Azure configuration
- **[Settings Guide](settings-guide.mdx)** - Configuration options
- **[CLI Guide](cli-guide.mdx)** - Command-line troubleshooting
- **[Technical Architecture](technical-architecture.mdx)** - System details

---

**Author**: Hazem Ali - Microsoft AI MVP  
**Last Updated**: September 2025

_For additional support, visit our [GitHub Discussions](https://github.com/DrHazemAli/image-studio/discussions) or [report issues](https://github.com/DrHazemAli/image-studio/issues)._
